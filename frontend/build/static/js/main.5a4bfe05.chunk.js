(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{141:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(49),r=a.n(l),o=(a(58),a(16)),i=a(15),c=a(11),m=a.n(c),d=a(3),u=a(4),h=a(9),p=a(8),v=a(10),b=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(u.a)(t,[{key:"logOut",value:function(e){e.preventDefault(),localStorage.removeItem("usertoken"),this.props.history.push("/")}},{key:"render",value:function(){var e=s.a.createElement("ul",{className:"navbar-nav"},s.a.createElement("li",{className:"nav-item"},s.a.createElement(o.b,{to:"/login",className:"nav-link"},"Login")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(o.b,{to:"/register",className:"nav-link"},"Register"))),t=s.a.createElement("ul",{className:"navbar-nav"},s.a.createElement("li",{className:"nav-item"},s.a.createElement(o.b,{to:"/profile",className:"nav-link"},"User")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(o.b,{to:"/todo-list",className:"nav-link"},"Todo List")),s.a.createElement("li",{className:"nav-item"},s.a.createElement("a",{href:"",onClick:this.logOut.bind(this),className:"nav-link"},"Logout")));return s.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark rounded"},s.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarsExample10","aria-controls":"navbarsExample10","aria-expanded":"false","aria-label":"Toggle navigation"},s.a.createElement("span",{className:"navbar-toggler-icon"})),s.a.createElement("div",{className:"collapse navbar-collapse justify-content-md-center",id:"navbarsExample10"},s.a.createElement("ul",{className:"navbar-nav"},s.a.createElement("li",{className:"nav-item"},s.a.createElement(o.b,{to:"/",className:"nav-link"},"Home"))),localStorage.usertoken?t:e))}}]),t}(n.Component),E=Object(i.e)(b),g=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"jumbotron mt-5"},s.a.createElement("div",{className:"col-sm-8 mx-auto"},s.a.createElement("h1",{className:"text-center"},"WELCOME"))))}}]),t}(n.Component),f=a(13),w=a(6),N=function(e){return m.a.post("users/register",{name:e.name,email:e.email,password:e.password}).then((function(e){console.log("Registered")}))},k=function(e){return m.a.post("users/login",{email:e.email,password:e.password}).then((function(e){return localStorage.setItem("usertoken",e.data.token),e.data})).catch((function(e){console.log(e)}))},y=function(e){return m.a.put("/users/password/",{email:e.email,password:e.password,new_password:e.new_password},{headers:{"Content-Type":"application/json",Authorization:e.token}}).then((function(e){return e.data})).catch((function(e){return console.dir("err",e),e.message}))},O=a(22),j=a(52),S=a.n(j);function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var D=function(){function e(t){Object(d.a)(this,e),this.validations=t}return Object(u.a)(e,[{key:"validate",value:function(e){var t=this.valid();return this.validations.forEach((function(a){if(!t[a.field].isInvalid){var n=e[a.field].toString(),s=a.args||[];("string"===typeof a.method?S.a[a.method]:a.method).apply(void 0,[n].concat(Object(O.a)(s),[e]))!==a.validWhen&&(t[a.field]={isInvalid:!0,message:a.message},t.isValid=!1)}})),t}},{key:"valid",value:function(){var e={};return this.validations.map((function(t){return e[t.field]={isInvalid:!1,message:""}})),function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({isValid:!0},e)}}]),e}(),P=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).handleFormSubmit=function(t){t.preventDefault();var a=e.validator.validate(e.state);if(e.setState({validation:a}),e.submitted=!0,a.isValid){var n={email:e.state.email,password:e.state.password};k(n).then((function(t){t&&e.props.history.push("/profile")}))}},e.validator=new D([{field:"email",method:"isEmpty",validWhen:!1,message:"Email is required."},{field:"email",method:"isEmail",validWhen:!0,message:"That is not a valid email."},{field:"password",method:"isEmpty",validWhen:!1,message:"Password is required."}]),e.state={email:"",password:"",errors:{},validation:e.validator.valid()},e.onChange=e.onChange.bind(Object(w.a)(e)),e.submitted=!1,e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"onChange",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-6 mt-5 mx-auto"},s.a.createElement("form",null,s.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},"Please sign in"),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"email"},"Email address"),s.a.createElement("input",{type:"email",className:"form-control",name:"email",placeholder:"Enter email",value:this.state.email,onChange:this.onChange}),s.a.createElement("span",{className:"help-block"},this.state.validation.email.message)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"password"},"Password"),s.a.createElement("input",{type:"password",className:"form-control",name:"password",placeholder:"Password",value:this.state.password,onChange:this.onChange}),s.a.createElement("span",{className:"help-block"},this.state.validation.password.message)),s.a.createElement("button",{type:"submit",onClick:this.handleFormSubmit,className:"btn btn-lg btn-primary btn-block"},"Sign in")))))}}]),t}(n.Component),x=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).handleFormSubmit=function(t){t.preventDefault();var a=e.validator.validate(e.state);if(e.setState({validation:a}),e.submitted=!0,a.isValid){var n={name:e.state.name,email:e.state.email,password:e.state.password};N(n).then((function(t){e.props.history.push("/login")}))}},e.validator=new D([{field:"email",method:"isEmpty",validWhen:!1,message:"Email is required."},{field:"email",method:"isEmail",validWhen:!0,message:"That is not a valid email."},{field:"name",method:"isEmpty",validWhen:!1,message:"Name is required."},{field:"password",method:"isEmpty",validWhen:!1,message:"Password is required."}]),e.state={name:"",email:"",password:"",errors:{},validation:e.validator.valid()},e.onChange=e.onChange.bind(Object(w.a)(e)),e.submitted=!1,e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"onChange",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-6 mt-5 mx-auto"},s.a.createElement("form",null,s.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},"Register"),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"name"},"First name"),s.a.createElement("input",{type:"text",className:"form-control",name:"name",placeholder:"Enter your first name",required:!0,value:this.state.name,onChange:this.onChange}),s.a.createElement("span",{className:"help-block"},this.state.validation.name.message)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"email"},"Email address"),s.a.createElement("input",{type:"email",className:"form-control",name:"email",placeholder:"Enter email",required:!0,value:this.state.email,onChange:this.onChange}),s.a.createElement("span",{className:"help-block"},this.state.validation.email.message)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"password"},"Password"),s.a.createElement("input",{type:"password",className:"form-control",name:"password",placeholder:"Password",required:!0,value:this.state.password,onChange:this.onChange}),s.a.createElement("span",{className:"help-block"},this.state.validation.password.message)),s.a.createElement("button",{type:"submit",onClick:this.handleFormSubmit,className:"btn btn-lg btn-primary btn-block"},"Register!")))))}}]),t}(n.Component),A=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).passwordMatch=function(e,t){return t.new_password===e},e.onSubmit=function(t){t.preventDefault();var a=e.validator.validate(e.state);if(e.setState({validation:a}),a.isValid){e.setState({message:""});var n={token:localStorage.usertoken,email:e.state.email,password:e.state.password,new_password:e.state.new_password};y(n).then((function(t){e.setState({message:t.message})})).catch((function(t){e.setState({message:t.message})}))}},e.validator=new D([{field:"password",method:"isEmpty",validWhen:!1,message:"Password is required."},{field:"new_password",method:"isEmpty",validWhen:!1,message:"New password is required."},{field:"confirm_password",method:"isEmpty",validWhen:!1,message:"Password confirmation is required."},{field:"confirm_password",method:e.passwordMatch,validWhen:!0,message:"Password and password confirmation do not match."}]),e.state={name:"",email:"",password:"",new_password:"",confirm_password:"",errors:{},message:"",validation:e.validator.valid()},e.onChange=e.onChange.bind(Object(w.a)(e)),e.onSubmit=e.onSubmit.bind(Object(w.a)(e)),e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"onChange",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"componentDidMount",value:function(){var e=this,t=localStorage.usertoken;t?function(e){return m.a.get("users/profile",{headers:{Authorization:e}}).then((function(e){return e.data.status="success",e.data})).catch((function(e){return console.dir(e),{error:e.message,status:"failed"}}))}(t).then((function(t){t&&("success"===t.status?e.setState({name:t.name,email:t.email}):e.props.history.push("/login"))})):(localStorage.removeItem("usertoken"),this.props.history.push("/login"))}},{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"jumbotron mt-5"},s.a.createElement("div",{className:"col-sm-8 mx-auto"},s.a.createElement("h1",{className:"text-center"},"PROFILE")),s.a.createElement("table",{className:"table col-md-6 mx-auto"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,"Name"),s.a.createElement("td",null,this.state.name)),s.a.createElement("tr",null,s.a.createElement("td",null,"Email"),s.a.createElement("td",null,this.state.email)),""!==this.state.message?s.a.createElement("tr",null,s.a.createElement("td",null," ",s.a.createElement("strong",null,"Message: ")),s.a.createElement("td",null,s.a.createElement("div",{className:"col-md-12"},s.a.createElement("div",{className:"alert alert-info alert-dismissible fade show",role:"alert"},this.state.message,s.a.createElement("button",{type:"button",class:"close","data-dismiss":"alert","aria-label":"Close"},s.a.createElement("span",{"aria-hidden":"true"},"\xd7")))))):s.a.createElement("tr",null),s.a.createElement("tr",null,s.a.createElement("td",null,"Update Password"),s.a.createElement("td",null,s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("table",null,s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"password"},"Password"),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("input",{type:"hidden",className:"form-control",value:this.state.email,name:"email"}),s.a.createElement("input",{type:"password",className:"form-control",value:this.state.password,name:"password",onChange:this.onChange}),s.a.createElement("span",{className:"help-block"},this.state.validation.password.message)))))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"new_password"},"New Password"),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("input",{type:"password",className:"form-control",value:this.state.new_password,name:"new_password",onChange:this.onChange}),s.a.createElement("span",{className:"help-block"},this.state.validation.new_password.message)))))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"confirm_password"},"Confirm Password"),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("input",{type:"password",className:"form-control",value:this.state.confirm_password,name:"confirm_password",onChange:this.onChange}),s.a.createElement("span",{className:"help-block"},this.state.validation.confirm_password.message)))))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("button",{className:"btn btn-primary btn-block"},"Update"))))))))))))}}]),t}(n.Component),M=function(e){return m.a.get("/api/tasks",{headers:{"Content-Type":"application/json",Authorization:e}}).then((function(e){return e.data.status="success",e.data})).catch((function(e){return{error:"Please login again!",status:"failed",message:e.message}}))},F=function(e){return m.a.post("/api/task",{name:e.name,status:e.status},{headers:{"Content-Type":"application/json",Authorization:e.token}}).then((function(e){return e.data})).catch((function(e){return{error:"Error to add",status:"failed",message:e.message}}))},_=function(e,t){return m.a.delete("/api/task/".concat(e),{headers:{"Content-Type":"application/json",Authorization:t}}).then((function(e){return console.log(e),e})).catch((function(e){return console.log(e),e}))},W=function(e){return m.a.put("/api/task/".concat(e.id),{name:e.name,status:e.status},{headers:{"Content-Type":"application/json",Authorization:e.token}}).then((function(e){return e.data}))},U=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).getAll=function(t){M(t).then((function(t){"success"!==t.status?(localStorage.removeItem("usertoken"),e.props.history.push("/login")):e.setState({task:"",items:Object(O.a)(t)},(function(){console.log(e.state.items)}))}))},e.onSubmit=function(t){t.preventDefault();var a=e.validator.validate(e.state);if(e.setState({validation:a}),a.isValid){var n=localStorage.usertoken,s={token:n,name:e.state.task,status:e.state.status};F(s).then((function(){e.getAll(n)})).catch((function(t){e.setState({editDisabled:!1,errorMessage:t.message})})),e.setState({editDisabled:!1})}},e.onUpdate=function(t){t.preventDefault();var a=e.validator.validate(e.state);if(e.setState({validation:a}),a.isValid){var n=localStorage.usertoken,s={id:e.state.id,token:n,name:e.state.task,status:e.state.status};W(s).then((function(){e.getAll(n)})).catch((function(t){e.setState({editDisabled:!1,isUpdate:!1,errorMessage:t.message})}))}e.setState({editDisabled:!1,isUpdate:!1,status:0})},e.onEdit=function(t,a,n,s){s.preventDefault(),e.setState({id:t,task:a,status:n,errorMessage:"",isUpdate:!0,validation:e.validator.valid()})},e.onDelete=function(t,a){a.preventDefault();var n=localStorage.usertoken;_(t,n).then((function(t){"failed"===t.data.status&&e.setState({errorMessage:t.data.message}),e.getAll(n)})).catch((function(t){e.setState({errorMessage:t.data.message})}))},e.validator=new D([{field:"task",method:"isEmpty",validWhen:!1,message:"Task name is required"},{field:"status",method:"isEmpty",validWhen:!1,message:"Status is required"}]),e.state={id:"",task:"",status:0,createdAt:"",isUpdate:!1,errorMessage:"",items:[],validation:e.validator.valid()},e.onSubmit=e.onSubmit.bind(Object(w.a)(e)),e.onChange=e.onChange.bind(Object(w.a)(e)),e.onCreate=e.onCreate.bind(Object(w.a)(e)),e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.usertoken;this.getAll(e)}},{key:"onChange",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"onCreate",value:function(e){e.preventDefault();var t=localStorage.usertoken;this.setState({id:"",task:"",status:0,createdAt:"",isUpdate:!1,errorMessage:"",items:[],validation:this.validator.valid()}),this.getAll(t)}},{key:"getStatus",value:function(e){return["Start","In Progress","End"][e]}},{key:"formatDate",value:function(e){return e.getDate()+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]+", "+e.getFullYear()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12 mt-5"},s.a.createElement("div",{className:"col-md-12"},""!==this.state.errorMessage?s.a.createElement("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert"},s.a.createElement("strong",null,"Error Message: ")," ",this.state.errorMessage):s.a.createElement("div",null)),s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"task"},"Task Title"),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("input",{type:"text",className:"form-control",value:this.state.task,name:"task",onChange:this.onChange}),s.a.createElement("span",{className:"help-block"},this.state.validation.task.message)))),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"status"},"Task Status"),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("select",{className:"form-control",name:"status",value:this.state.status,onChange:this.onChange},s.a.createElement("option",{value:"0"},"Start"),s.a.createElement("option",{value:"1"},"In Progress"),s.a.createElement("option",{value:"2"},"End")),s.a.createElement("span",{className:"help-block"},this.state.validation.status.message)))),s.a.createElement("button",{className:"btn btn-primary btn-block",onClick:this.onUpdate.bind(this),style:this.state.isUpdate?{}:{display:"none"}},"Update"),s.a.createElement("button",{type:"submit",onClick:this.onSubmit.bind(this),className:"btn btn-success btn-block",style:this.state.isUpdate?{display:"none"}:{}},"Submit"),s.a.createElement("button",{onClick:this.onCreate.bind(this),className:"btn btn-info btn-block",style:this.state.isUpdate?{}:{display:"none"}},"Create New")),s.a.createElement("table",{className:"table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Title"),s.a.createElement("th",null,"Status"),s.a.createElement("th",null,"Created Date"),s.a.createElement("th",{className:"text-right"},"Action"))),s.a.createElement("tbody",null,this.state.items.map((function(t,a){return s.a.createElement("tr",{key:a},s.a.createElement("td",{className:"text-left"},t.name),s.a.createElement("td",{className:"text-left"},e.getStatus(t.status)),s.a.createElement("td",{className:"text-left"},e.formatDate(new Date(t.createdAt))),s.a.createElement("td",{className:"text-right"},s.a.createElement("button",{className:"btn btn-info mr-1",disabled:e.state.editDisabled,onClick:e.onEdit.bind(e,t.id,t.name,t.status)},"Edit"),s.a.createElement("button",{href:"",className:"btn btn-danger",onClick:e.onDelete.bind(e,t.id),style:e.state.isUpdate?{display:"none"}:{}},"Delete")))}))))))}}]),t}(n.Component);m.a.defaults.baseURL="http://10.0.0.118/backend";var T=function(){return s.a.createElement(o.a,null,s.a.createElement("div",{className:"App"},s.a.createElement(E,null),s.a.createElement(i.a,{exact:!0,path:"/",component:g}),s.a.createElement("div",{className:"container"},s.a.createElement(i.a,{exact:!0,path:"/register",component:x}),s.a.createElement(i.a,{exact:!0,path:"/login",component:P}),s.a.createElement(i.a,{exact:!0,path:"/profile",component:A}),s.a.createElement(i.a,{exact:!0,path:"/todo-list",component:U}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},53:function(e,t,a){e.exports=a(141)},58:function(e,t,a){}},[[53,1,2]]]);
//# sourceMappingURL=main.5a4bfe05.chunk.js.map